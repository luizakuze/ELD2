-- Contador Bidirecional entre MIN e MAX.
-- entrada DIR: '0' = Crescente e '1' = Decrescente.

library ieee;
-- STD_LOGIC and STD_LOGIC_VECTOR types, and relevant functions
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity conta_0_N is 
generic(MIN: natural := 0; MAX: natural := 50);
port(clock, reset:= in std_LOGIC; 
dir:= in std_LOGIC;
q: out integer range MIN to MAX);
end entity;

-- Com underflow no valor minimo (MIN) e overflow no maximo (MAX)
architecture ifsc_v1 of conta_0_N is
begin
process (clock,reset)
	variable count1 : integer range MIN to MAX;
	variable count2 : integer range MAX to MIN;
begin
	-- Crescente
	if (DIR = '0') then
		if (reset = '1') then
			count1 := MIN;
		elsif (rising_edge(clock)) then
			if count1 = MAX then
				count1 := MIN;
			else 
				count1 := count1 + 1;
			end if;
		end if;
	else 
		-- Decresce (DIR = 1)
		if (reset = '1') then
			count2 := MAX;
		elsif (rising_edge(clock)) then
			if count2 = MIN then
				count2 := MAX;
			else 
				count2 := count2 - 1;
			end if;
		end if;
	end if;
	q <= count2;
end process;
end architecture;
--
--
--configuration cfg_ifsc of conta_0_N is
--for ifsc_v1 end for;
--end configuration;